#include <stdio.h>
#include <math.h>

#define T 2000
#define X 10

int main(void) {
  double u[T][X + 1];
  int indexT;
  int indexX;
  double deltaT = 1.0 / T;
  double deltaX = 1.0 / X;

  FILE *fp;
  char *fname = "output.csv";
  
  fp = fopen(fname, "w");

  for(indexX = 0; indexX < X; indexX++) {
    u[0][indexX] = (double)sin((double)(deltaX * indexX) * M_PI);
  }

  for(indexT = 0; indexT < T; indexT++) {
    u[indexT][0] = 0;
    u[indexT][X] = 0;
  }

  for(indexX = 0; indexX < X + 1; indexX++) {
    fprintf(fp, "%f,", u[0][indexX]);
  }
  fprintf(fp, "\n");
  
  for(indexT = 0; indexT < T - 1; indexT++) {
    fprintf(fp, "%f,", u[indexT + 1][0]);
    for(indexX = 1; indexX < X; indexX++) {
      u[indexT + 1][indexX] =
	u[indexT][indexX] + (deltaT * (u[indexT][indexX + 1] - (2 * u[indexT][indexX]) + u[indexT][indexX - 1]))
	/ (deltaX * deltaX);

      fprintf(fp, "%f,", u[indexT + 1][indexX]);
    }
    fprintf(fp, "%f\n", u[indexT + 1][X]);
  }

  fprintf(stdout, "%f, %f\n", deltaT, deltaX);

  fclose(fp);

  return 0;
}
  
